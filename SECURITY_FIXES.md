# ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–î–∞—Ç–∞:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ

## üîí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. ‚úÖ –£—Ç–µ—á–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –§–∞–π–ª `vercel-env.txt` —Å–æ–¥–µ—Ä–∂–∞–ª —Ä–µ–∞–ª—å–Ω—ã–µ –∫—Ä–µ–¥—ã: DATABASE_URL, JWT_SECRET, REGISTRATION_SECRET
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚ùå –£–¥–∞–ª–µ–Ω `vercel-env.txt` –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- ‚úÖ –§–∞–π–ª —É–∂–µ –±—ã–ª –≤ `.gitignore` (—Å—Ç—Ä–æ–∫–∞ 139)
- ‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–∏

### 2. ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ debug endpoints

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í—Å–µ `/api/debug/*` endpoints –±—ã–ª–∏ –ø—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ middleware
- –ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏: —Å–æ–∑–¥–∞–Ω–∏–µ –ë–î, –º–∏–≥—Ä–∞—Ü–∏–∏, —Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–π, —Å–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```typescript
// src/middleware.ts
if (pathname.startsWith('/api/debug/')) {
  // –í production - –ø–æ–ª–Ω—ã–π –∑–∞–ø—Ä–µ—Ç (404)
  if (process.env.NODE_ENV === 'production') {
    return NextResponse.json(
      { error: 'Debug endpoints disabled in production' },
      { status: 404 }
    );
  }
  // –í dev - —Ç—Ä–µ–±—É–µ—Ç—Å—è ADMIN —Ä–æ–ª—å
  const token = request.cookies.get('token')?.value;
  if (!token) return 401;
  const decoded = jwt.verify(token, getJwtSecret());
  if (decoded.role !== 'ADMIN') return 403;
}
```

### 3. ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π Next.js

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –î–≤–∞ –∫–æ–Ω—Ñ–∏–≥–∞: `next.config.ts` –∏ `next.config.mjs`
- –í `.ts`: `ignoreDuringBuilds: true`, `ignoreBuildErrors: true`
- –í `.mjs`: `ignoreDuringBuilds: false`
- –ù–µ–¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç—å: –∫–∞–∫–æ–π –∫–æ–Ω—Ñ–∏–≥ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è?

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚ùå –£–¥–∞–ª–µ–Ω `next.config.mjs`
- ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ `next.config.ts` —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏:
  ```typescript
  eslint: {
    ignoreDuringBuilds: false, // –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã
  },
  typescript: {
    ignoreBuildErrors: false, // –ü—Ä–æ–≤–µ—Ä–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã
  }
  ```

### 4. ‚úÖ Middleware –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª JWT –ø–æ–¥–ø–∏—Å—å

**–ü—Ä–æ–±–ª–µ–º–∞:**
- Middleware –ø—Ä–æ–≤–µ—Ä—è–ª —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ —Ç–æ–∫–µ–Ω–∞, –Ω–µ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –£–∂–µ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Ä–∞–Ω–µ–µ (—Å—Ç—Ä–æ–∫–∏ 32-49 –≤ middleware.ts)
- JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `jwt.verify()` –¥–ª—è –≤—Å–µ—Ö –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π

### 5. ‚úÖ –î–µ—Ñ–æ–ª—Ç–Ω—ã–π CRON_SECRET

**–ü—Ä–æ–±–ª–µ–º–∞:**
```typescript
const cronSecret = process.env.CRON_SECRET || 'your-secret-key-here';
```
- –î–µ—Ñ–æ–ª—Ç–Ω—ã–π —Å–µ–∫—Ä–µ—Ç –ø–æ–∑–≤–æ–ª—è–ª –≤—ã–∑—ã–≤–∞—Ç—å –∫—Ä–æ–Ω –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–ª—é—á–∞

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```typescript
const cronSecret = process.env.CRON_SECRET;
if (!cronSecret) {
  console.error('‚ùå CRON_SECRET not configured');
  return NextResponse.json({ 
    error: 'Server misconfiguration' 
  }, { status: 500 });
}
```

### 6. ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–Ω—ã–π ESLint

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í `vercel.json`: `NEXT_DISABLE_ESLINT_PLUGIN: "1"`
- –í `eslint.config.mjs`: `ignores: ["**/*"]` - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤—Å–µ —Ñ–∞–π–ª—ã
- –õ–∏–Ω—Ç–∏–Ω–≥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚ùå –£–±—Ä–∞–Ω–æ `NEXT_DISABLE_ESLINT_PLUGIN` –∏–∑ `vercel.json`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `eslint.config.mjs`:
  ```javascript
  rules: {
    'no-console': process.env.NODE_ENV === 'production' ? 'error' : 'warn',
    'no-eval': 'error',
    'no-implied-eval': 'error',
  },
  ignores: [
    'node_modules/**',
    '.next/**',
    'out/**',
    // –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ
  ]
  ```

### 7. ‚úÖ –ú–µ—Ä—Ç–≤—ã–π FastAPI backend

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π `backend/main.py` (FastAPI + Supabase)
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∞—è –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (PostgreSQL + Prisma)
- –†–∏—Å–∫ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–π –≤ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚ùå –£–¥–∞–ª–µ–Ω–∞ –≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `backend/`
- –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã: Next.js + Prisma + PostgreSQL

### 8. ‚úÖ Console.* –≤ production

**–ü—Ä–æ–±–ª–µ–º–∞:**
- `console.log/error/warn` –ø–æ–≤—Å—é–¥—É –≤–º–µ—Å—Ç–æ logger
- –†–∏—Å–∫ —É—Ç–µ—á–∫–∏ PII –∏ —à—É–º–∞ –≤ –ª–æ–≥–∞—Ö

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∞–≤–∏–ª–æ ESLint: `'no-console': 'error'` –≤ production
- ‚ö†Ô∏è –í dev —Ä–µ–∂–∏–º–µ - `'warn'` –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ logger
- üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –∑–∞–º–µ–Ω—è—Ç—å `console.*` –Ω–∞ `logger` –∏–∑ `@/lib/logger.ts`

## üìã –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (—Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞):

1. **–ü–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã:**
   ```bash
   # –í Vercel Dashboard ‚Üí Settings ‚Üí Environment Variables
   - DATABASE_URL (–Ω–æ–≤—ã–π)
   - JWT_SECRET (–Ω–æ–≤—ã–π)
   - REGISTRATION_SECRET (–Ω–æ–≤—ã–π)
   - CRON_SECRET (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω)
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   TELEGRAM_BOT_TOKEN=<–≤–∞—à —Ç–æ–∫–µ–Ω>
   TELEGRAM_CHAT_ID=<–≤–∞—à chat id>
   ```

3. **–ú–∏–≥—Ä–∞—Ü–∏—è console.* –Ω–∞ logger:**
   ```typescript
   // –ë—ã–ª–æ:
   console.log('User logged in', userId);
   
   // –°—Ç–∞–ª–æ:
   import { logger } from '@/lib/logger';
   logger.info('User logged in', { userId });
   ```

### –£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —ç—Ç–∞–ø–∞:

4. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å error tracking** (Sentry/–¥—Ä—É–≥–æ–π APM)
5. **–î–æ–±–∞–≤–∏—Ç—å rate limiting** –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö API
6. **–í–∫–ª—é—á–∏—Ç—å —Å—Ç—Ä–æ–≥–∏–π TypeScript** –≤ `tsconfig.json`
7. **–î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç/–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã** –Ω–∞ auth –∏ CRUD
8. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏**

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:

- ‚úÖ –°–µ–∫—Ä–µ—Ç—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ —Ä–µ–ø–æ
- ‚úÖ Debug endpoints –∑–∞—â–∏—â–µ–Ω—ã
- ‚úÖ –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- ‚úÖ JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ CRON_SECRET –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
- ‚úÖ ESLint –≤–∫–ª—é—á–µ–Ω —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥ —É–¥–∞–ª–µ–Ω
- ‚úÖ Console.* –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –≤ production

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

–ü—Ä–æ–µ–∫—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ –≥–æ—Ç–æ–≤ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

---

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û: –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–µ—Ä–µ–≤—ã–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –æ–∫—Ä—É–∂–µ–Ω–∏–∏!**

