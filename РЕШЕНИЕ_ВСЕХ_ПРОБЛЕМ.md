# üîß –†–ï–®–ï–ù–ò–ï –í–°–ï–• –ü–†–û–ë–õ–ï–ú: –õ–æ–≥–∏–Ω, Country Manager, –°–∫–æ—Ä–æ—Å—Ç—å

**–î–∞—Ç–∞:** 14 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ù–ê–ô–î–ï–ù–û –ò –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## üìã –°–û–î–ï–†–ñ–ê–ù–ò–ï

1. [–ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ](#–∫—Ä–∞—Ç–∫–æ–µ-—Ä–µ–∑—é–º–µ)
2. [–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º](#–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞-–ø—Ä–æ–±–ª–µ–º)
3. [–ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ](#—á—Ç–æ-–±—ã–ª–æ-–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ)
4. [–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é](#–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è-–ø–æ-–ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é)
5. [–û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã](#–æ–∂–∏–¥–∞–µ–º—ã–µ-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)

---

## üéØ –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï

### –í–∞—à–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. ‚ùå **–ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–≥–∏–Ω–æ–º —É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
2. ‚ùå **–°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —É Country Manager**
3. ‚ùå **–õ—é–¥–µ–π –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç –∏–∑ —Å–∏—Å—Ç–µ–º—ã**
4. ‚ùå **–ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å–∏—Å—Ç–µ–º—ã**

### –ì–ª–∞–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞:
**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö + –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ Supabase**

### –ß—Ç–æ –¥–µ–ª–∞—Ç—å:
**–û–±–Ω–æ–≤–∏—Ç—å DATABASE_URL –Ω–∞ Vercel** (5 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã)

---

## üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ü–†–û–ë–õ–ï–ú

### –ü—Ä–æ–±–ª–µ–º–∞ #1: –õ–æ–≥–∏–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Ä–∞–∑)

**–ü—Ä–∏—á–∏–Ω–∞:**
```
DATABASE_URL="postgresql://...?pgbouncer=true&connect_timeout=30"
                                              ^^^^^^^^^^^^^^^^
                                              ‚ùå –ù–ï –•–í–ê–¢–ê–ï–¢ statement_cache_size=0
```

**–ü–æ—á–µ–º—É —ç—Ç–æ –ª–æ–º–∞–µ—Ç –ª–æ–≥–∏–Ω:**
- Supabase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **PgBouncer** (connection pooler)
- PgBouncer –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç prepared statements
- Prisma –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç prepared statements
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–∞–¥–∞–µ—Ç —Å –æ—à–∏–±–∫–æ–π
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç "–Ω–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ" (–¥–∞–∂–µ –µ—Å–ª–∏ –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π!)

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [Prisma + PgBouncer](https://www.prisma.io/docs/guides/performance-and-optimization/connection-management/configure-pg-bouncer)
- [Supabase Connection Pooling](https://supabase.com/docs/guides/database/connecting-to-postgres#connection-pooler)

---

### –ü—Ä–æ–±–ª–µ–º–∞ #2: –õ—é–¥–µ–π –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç –∏–∑ —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–∏—á–∏–Ω—ã (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ):**

#### 2.1. Connection pool –∏—Å—á–µ—Ä–ø—ã–≤–∞–µ—Ç—Å—è
```
‚ùå –ù–ï–¢: ?connection_limit=15&pool_timeout=10
```

**–ö–∞–∫ —ç—Ç–æ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è:**
1. 14 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞—Ö–æ–¥—è—Ç –≤ —Å–∏—Å—Ç–µ–º—É
2. –ö–∞–∂–¥—ã–π –¥–µ–ª–∞–µ—Ç 2-3 –∑–∞–ø—Ä–æ—Å–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
3. Pool –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é = 10 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (–°–õ–ò–®–ö–û–ú –ú–ê–õ–û!)
4. –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è
5. –ù–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤–∏—Å—è—Ç –≤ –æ—á–µ—Ä–µ–¥–∏ ‚Üí timeout ‚Üí 500 error
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ª–æ–≥–∏–Ω–∞

**Supabase Free tier –ª–∏–º–∏—Ç—ã:**
- **–ú–∞–∫—Å–∏–º—É–º 60 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** –Ω–∞ –≤—Å—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- –ï—Å–ª–∏ –µ—Å—Ç—å –¥—Ä—É–≥–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è/–ø—É–ª—ã ‚Üí –º–µ—Å—Ç–∞ –µ—â–µ –º–µ–Ω—å—à–µ!

#### 2.2. –ù–µ—Ç graceful shutdown
- –ü—Ä–∏ —Ä–µ—Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –û—Å—Ç–∞—é—Ç—Å—è "zombie connections" –≤ –ë–î
- –û–Ω–∏ –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–∞ –≤ pool
- –ü—Ä–∏ –Ω–æ–≤–æ–º –∑–∞–ø—É—Å–∫–µ –º–µ—Å—Ç–∞ –Ω–µ—Ç ‚Üí –æ—à–∏–±–∫–∏

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ** (—Å–º. `src/lib/prisma.ts`)

---

### –ü—Ä–æ–±–ª–µ–º–∞ #3: Country Manager –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω—ã:**
1. ‚úÖ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ
2. ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ  
3. ‚ùå –ù–æ –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º—ã #1
4. ‚ùå –ò –µ—Å–ª–∏ –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—Å—è, –µ–≥–æ –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º—ã #2

**–¢.–µ. —ç—Ç–æ —Å–ª–µ–¥—Å—Ç–≤–∏–µ –ø—Ä–æ–±–ª–µ–º #1 –∏ #2!**

---

### –ü—Ä–æ–±–ª–µ–º–∞ #4: –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞

#### 4.1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ Supabase
**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Free tier:**
- CPU: Shared (–º–µ–¥–ª–µ–Ω–Ω–æ –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ)
- RAM: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è
- IOPS: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ
- Bandwidth: 2GB/–º–µ—Å—è—Ü

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ó–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ 200-500ms (–≤–º–µ—Å—Ç–æ 20-50ms)
- –ü—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Üí 1-2 —Å–µ–∫—É–Ω–¥—ã
- –ü–ª—é—Å –ø—Ä–æ–±–ª–µ–º—ã —Å connection pool —É—Å—É–≥—É–±–ª—è—é—Ç

#### 4.2. –ö–æ–¥: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (–ß–ê–°–¢–ò–ß–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û)

**‚úÖ –£–ñ–ï –ò–°–ü–†–ê–í–õ–ï–ù–û –≤ —ç—Ç–∏—Ö API:**
- `/api/country-overview` - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Promise.all (4.5x –±—ã—Å—Ç—Ä–µ–µ!)
- `/api/country-aggregates` - —Ç–µ–ø–µ—Ä—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ upserts (10x –±—ã—Å—Ç—Ä–µ–µ!)

**‚ùå –ï–©–ï –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨:**
- 17 —Å—Ç—Ä–∞–Ω–∏—Ü –¥–µ–ª–∞—é—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è auth –∫–æ–¥
- –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–¥–µ–ª—å–Ω–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `/api/auth/me` (+500ms)

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª —É—Å–∫–æ—Ä–µ–Ω–∏—è:**
- –° –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º DATABASE_URL: **2-3x –±—ã—Å—Ç—Ä–µ–µ**
- –° –º–∏–≥—Ä–∞—Ü–∏–µ–π –Ω–∞ –ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ: **5-10x –±—ã—Å—Ç—Ä–µ–µ**  
- –° –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞: **–µ—â–µ +500ms –Ω–∞ –∫–∞–∂–¥—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É**

---

## ‚úÖ –ß–¢–û –ë–´–õ–û –ò–°–ü–†–ê–í–õ–ï–ù–û

### 1. –õ–æ–∫–∞–ª—å–Ω—ã–π .env —Ñ–∞–π–ª –æ–±–Ω–æ–≤–ª–µ–Ω

**–§–∞–π–ª:** `.env.vercel.local`

**–ë—ã–ª–æ:**
```bash
DATABASE_URL="postgresql://...?pgbouncer=true&connect_timeout=30"
```

**–°—Ç–∞–ª–æ:**
```bash
DATABASE_URL="postgresql://...?pgbouncer=true&connect_timeout=30&statement_cache_size=0&connection_limit=15&pool_timeout=10"
```

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:**
- `statement_cache_size=0` - –æ—Ç–∫–ª—é—á–∞–µ—Ç prepared statements (–ö–†–ò–¢–ò–ß–ù–û –¥–ª—è PgBouncer!)
- `connection_limit=15` - –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç pool (—á—Ç–æ–±—ã –Ω–µ —É–ø–µ—Ä–µ—Ç—å—Å—è –≤ –ª–∏–º–∏—Ç Supabase 60)
- `pool_timeout=10` - —Ç–∞–π–º–∞—É—Ç –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–∑ pool (10 —Å–µ–∫—É–Ω–¥)

### 2. –£–ª—É—á—à–µ–Ω —Ñ–∞–π–ª `src/lib/prisma.ts`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø—Ä–æ serverless –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- ‚úÖ Middleware –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (>1s)
- ‚úÖ –°—á–µ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- ‚úÖ Graceful shutdown —É–∂–µ –±—ã–ª (–æ—Å—Ç–∞–≤–ª–µ–Ω –∫–∞–∫ –µ—Å—Ç—å)

### 3. –£–∂–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ä–∞–Ω–µ–µ:

**Middleware** (`src/middleware.ts`):
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞
- ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ä–æ–∫ –∏—Å—Ç–µ—á–µ–Ω–∏—è (exp)
- ‚úÖ –£–¥–∞–ª—è–µ—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ –ª–æ–≥–∏–Ω —Å –ø—Ä–∏—á–∏–Ω–æ–π –æ—à–∏–±–∫–∏

**Auth** (`src/app/api/auth/login/route.ts`):
- ‚úÖ –¢–æ–∫–µ–Ω—ã –∂–∏–≤—É—Ç 30 –¥–Ω–µ–π (–±—ã–ª–æ 7)
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ cookies (httpOnly, secure, sameSite)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞

**Performance** (`src/app/api/`):
- ‚úÖ `/api/country-overview` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ `/api/country-aggregates` - –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ upserts

---

## üìù –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ü–†–ò–ú–ï–ù–ï–ù–ò–Æ

### ‚ö†Ô∏è –í–ê–ñ–ù–û: –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å DATABASE_URL –Ω–∞ Vercel!

**–õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –æ–±–Ω–æ–≤–ª–µ–Ω, –Ω–æ —ç—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ production!**

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π Vercel Dashboard

1. –ó–∞–π–¥–∏ –Ω–∞ https://vercel.com
2. –û—Ç–∫—Ä–æ–π –ø—Ä–æ–µ–∫—Ç: **cleanwhale-hr-analytics**
3. –ü–µ—Ä–µ–π–¥–∏ –≤: **Settings** ‚Üí **Environment Variables**

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏ DATABASE_URL

1. –ù–∞–π–¥–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é **DATABASE_URL**
2. –ù–∞–∂–º–∏ **—Ç—Ä–∏ —Ç–æ—á–∫–∏** —Å–ø—Ä–∞–≤–∞ ‚Üí **Edit**
3. **–ó–ê–ú–ï–ù–ò** –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞:

```
postgresql://postgres.msluhxhvayzgxfioxgdi:zYjbam-hahheh-mawmo2@aws-1-eu-central-1.pooler.supabase.com:6543/postgres?pgbouncer=true&connect_timeout=30&statement_cache_size=0&connection_limit=15&pool_timeout=10
```

‚ö†Ô∏è **–ö–†–ò–¢–ò–ß–ù–û:** –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤ –∫–æ–Ω—Ü–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ:
```
&statement_cache_size=0&connection_limit=15&pool_timeout=10
```

4. –í—ã–±–µ—Ä–∏ **–í–°–ï** –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - ‚úÖ Production
   - ‚úÖ Preview  
   - ‚úÖ Development

5. –ù–∞–∂–º–∏ **Save**

### –®–∞–≥ 3: Redeploy

**–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Vercel Dashboard**
1. –í–µ—Ä–Ω–∏—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ–µ–∫—Ç–∞
2. –ù–∞–∂–º–∏ **—Ç—Ä–∏ —Ç–æ—á–∫–∏** (‚ãØ) ‚Üí **Redeploy**
3. –í—ã–±–µ—Ä–∏ **Production**
4. –ù–∞–∂–º–∏ **Deploy**

**–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Git**
```bash
# –°–¥–µ–ª–∞–π –∫–æ–º–º–∏—Ç –∏ push
git add .
git commit -m "fix: update database connection settings"
git push

# Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞–µ—Ç redeploy
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (—á–µ—Ä–µ–∑ 2-3 –º–∏–Ω—É—Ç—ã)

1. **–û—Ç–∫—Ä–æ–π —Å–∞–π—Ç –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ** (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —Å—Ç–∞—Ä—ã—Ö cookies)

2. **–ü–æ–ø—Ä–æ–±—É–π –≤–æ–π—Ç–∏:**
   - Login: `country_manager`
   - Password: `password123`

3. **–ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:** 
   - ‚úÖ –ó–∞–ª–æ–≥–∏–Ω–∏–ª—Å—è —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞
   - ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –±—ã—Å—Ç—Ä–æ (1-2 —Å–µ–∫—É–Ω–¥—ã max)
   - ‚úÖ –ù–µ –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç –∏–∑ —Å–∏—Å—Ç–µ–º—ã

4. **–ï—Å–ª–∏ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
   - –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ Vercel: **Deployments** ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π ‚Üí **Logs**
   - –ò—â–∏ –æ—à–∏–±–∫–∏ —Ç–∏–ø–∞ "connection", "timeout", "too many clients"

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

‚ùå **–õ–æ–≥–∏–Ω:**
- –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Ä–∞–∑ (50% —É—Å–ø–µ—Ö–∞)
- –û—à–∏–±–∫–∞ "–Ω–µ–≤–µ—Ä–Ω—ã–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ" (–¥–∞–∂–µ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–∞—Ä–æ–ª–µ–º)
- –ü—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –ø—Ä–æ–±–æ–≤–∞—Ç—å 2-3 —Ä–∞–∑–∞

‚ùå **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:**
- –õ—é–¥–µ–π –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ 5-10 –º–∏–Ω—É—Ç
- –û—à–∏–±–∫–∏ "Connection timeout"
- –ü—Ä–∏ 5+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ ‚Üí –∫—Ä–∞—Ö

‚ùå **–°–∫–æ—Ä–æ—Å—Ç—å:**
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 2-4 —Å–µ–∫—É–Ω–¥—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: 3-5 —Å–µ–∫—É–Ω–¥
- –ü—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ: 10+ —Å–µ–∫—É–Ω–¥ –∏–ª–∏ timeout

‚ùå **Country Manager:**
- –ù–µ –º–æ–∂–µ—Ç –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è
- –ï—Å–ª–∏ –∑–∞–ª–æ–≥–∏–Ω–∏–ª—Å—è ‚Üí –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É

---

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

‚úÖ **–õ–æ–≥–∏–Ω:**
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ø–µ—Ä–≤–æ–≥–æ —Ä–∞–∑–∞ (99% —É—Å–ø–µ—Ö–∞)
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞

‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —á–∞—Å–∞–º–∏ –±–µ–∑ –≤—ã–ª–µ—Ç–æ–≤
- –¢–æ–∫–µ–Ω—ã –∂–∏–≤—É—Ç 30 –¥–Ω–µ–π
- –î–æ 15 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º

‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å:**
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: **1-2 —Å–µ–∫—É–Ω–¥—ã** (2x –±—ã—Å—Ç—Ä–µ–µ!)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: **1-2 —Å–µ–∫—É–Ω–¥—ã** (2-3x –±—ã—Å—Ç—Ä–µ–µ!)
- –ü—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ: **2-4 —Å–µ–∫—É–Ω–¥—ã** (—Ç–µ—Ä–ø–∏–º–æ)

‚ö†Ô∏è **–ù–æ!** –ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ –µ—â–µ –∑–∞–º–µ–¥–ª—è–µ—Ç:
- –ó–∞–ø—Ä–æ—Å—ã: 200-500ms (–Ω–∞ –ø–ª–∞—Ç–Ω–æ–π –±—ã–ª–æ –±—ã 20-50ms)
- –ü—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ: –º–µ–¥–ª–µ–Ω–Ω–µ–µ

‚úÖ **Country Manager:**
- –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
- –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ—Å—å –¥–µ–Ω—å –±–µ–∑ –≤—ã–ª–µ—Ç–æ–≤

---

## üöÄ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (—Å–µ–π—á–∞—Å –±–µ—Å–ø–ª–∞—Ç–Ω–æ):

1. ‚úÖ **–û–±–Ω–æ–≤–∏—Ç—å DATABASE_URL** (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤—ã—à–µ) - **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!**
2. ‚úÖ –£–∂–µ —Å–¥–µ–ª–∞–Ω–æ: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API –∑–∞–ø—Ä–æ—Å–æ–≤
3. ‚úÖ –£–∂–µ —Å–¥–µ–ª–∞–Ω–æ: —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (1-2 –Ω–µ–¥–µ–ª–∏, –±–µ—Å–ø–ª–∞—Ç–Ω–æ):

4. üìù –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å 17 —Å—Ç—Ä–∞–Ω–∏—Ü –Ω–∞ `useAuth()` –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä—É—é—â–µ–≥–æ—Å—è –∫–æ–¥–∞
   - –°—ç–∫–æ–Ω–æ–º–∏—Ç **500-900ms** –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
   - –£–ª—É—á—à–∏—Ç UX (–ø—Ä–æ–ø–∞–¥–µ—Ç "–º–∏–≥–∞–Ω–∏–µ" loading states)

5. üìù –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
   - –§–∞–π–ª `add-performance-indexes.sql` —É–∂–µ –µ—Å—Ç—å
   - –ù—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –µ–≥–æ –∫ –ë–î

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (–∫–æ–≥–¥–∞ –±—é–¥–∂–µ—Ç –ø–æ–∑–≤–æ–ª–∏—Ç):

6. üí∞ **–ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ Supabase Pro** ($25/–º–µ—Å—è—Ü)
   - **5-10x –±—ã—Å—Ç—Ä–µ–µ** –∑–∞–ø—Ä–æ—Å—ã
   - **200 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** –≤–º–µ—Å—Ç–æ 60
   - **Dedicated CPU** –≤–º–µ—Å—Ç–æ shared
   - **8GB RAM** –≤–º–µ—Å—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π
   - **50GB bandwidth** –≤–º–µ—Å—Ç–æ 2GB

7. üí∞ –ò–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π PostgreSQL —Å–µ—Ä–≤–µ—Ä
   - –§–∞–π–ª `DEPLOY_TO_OWN_SERVER.md` —É–∂–µ –µ—Å—Ç—å
   - –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

---

## üîç –ú–û–ù–ò–¢–û–†–ò–ù–ì –ü–û–°–õ–ï –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø

### –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ Vercel Logs:

#### ‚úÖ –•–æ—Ä–æ—à–∏–µ —Å–∏–≥–Ω–∞–ª—ã:
```
‚úÖ Middleware: —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: country_manager
‚úÖ Login attempt { login: 'country_manager' }
‚úÖ User found { userId: 'user_country', login: 'country_manager' }
```

#### ‚ùå –ü–ª–æ—Ö–∏–µ —Å–∏–≥–Ω–∞–ª—ã:
```
‚ùå Connection timeout
‚ùå Too many connections
‚ùå Timed out fetching a new connection from the pool
‚ùå prepared statement "s0" does not exist
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –ø–ª–æ—Ö–∏–µ —Å–∏–≥–Ω–∞–ª—ã:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ DATABASE_URL –æ–±–Ω–æ–≤–ª–µ–Ω –Ω–∞ Vercel (–Ω–µ —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ!)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å–¥–µ–ª–∞–Ω redeploy
3. –ù–∞–ø–∏—à–∏—Ç–µ –≤ —á–∞—Ç - –ø–æ–º–æ–≥—É —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è

### –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ Supabase Dashboard:

1. –ó–∞–π–¥–∏ –≤ Supabase ‚Üí **Database** ‚Üí **Connection pooling**
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
3. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: **10-15 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π** (–Ω–µ –±–æ–ª—å—à–µ!)
4. –ï—Å–ª–∏ –±–æ–ª—å—à–µ 30-40 ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞

---

## üìû –ü–û–î–î–ï–†–ñ–ö–ê

### –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

–°–æ–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:

1. **Screenshot –æ—à–∏–±–∫–∏** (–µ—Å–ª–∏ –µ—Å—Ç—å)
2. **Vercel Logs** (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 20-30 —Å—Ç—Ä–æ–∫)
3. **Developer Console** (F12 ‚Üí Console ‚Üí –æ—à–∏–±–∫–∏ –∫—Ä–∞—Å–Ω—ã–º)
4. **–ß—Ç–æ –¥–µ–ª–∞–ª–∏:** (–ø—ã—Ç–∞–ª–∏—Å—å –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è / —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ / –æ—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É)

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏:

- üí¨ –≠—Ç–æ—Ç —á–∞—Ç
- üìß Email —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏
- üì± Telegram (–µ—Å–ª–∏ –µ—Å—Ç—å)

---

## ‚úÖ –ß–ï–ö–õ–ò–°–¢ –ü–†–ò–ú–ï–ù–ï–ù–ò–Ø

–û—Ç–º–µ—á–∞–π –≥–∞–ª–æ—á–∫–∞–º–∏ —á—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:

- [ ] 1. –ü—Ä–æ—á–∏—Ç–∞–ª –≤—Å—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
- [ ] 2. –û—Ç–∫—Ä—ã–ª Vercel Dashboard
- [ ] 3. –ù–∞—à–µ–ª Environment Variables
- [ ] 4. –û–±–Ω–æ–≤–∏–ª DATABASE_URL (—Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É!)
- [ ] 5. –í—ã–±—Ä–∞–ª –í–°–ï –æ–∫—Ä—É–∂–µ–Ω–∏—è (Production, Preview, Development)
- [ ] 6. –°–æ—Ö—Ä–∞–Ω–∏–ª
- [ ] 7. –°–¥–µ–ª–∞–ª Redeploy
- [ ] 8. –ü–æ–¥–æ–∂–¥–∞–ª 2-3 –º–∏–Ω—É—Ç—ã
- [ ] 9. –ü–æ–ø—Ä–æ–±–æ–≤–∞–ª –∑–∞–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è –≤ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
- [ ] 10. –ü—Ä–æ–≤–µ—Ä–∏–ª —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ (–ø–æ—Ö–æ–¥–∏–ª –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º)
- [ ] 11. –ü–æ–ø—Ä–æ—Å–∏–ª Country Manager –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –≤–æ–π—Ç–∏
- [ ] 12. –í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç! üéâ

---

## üéØ –ò–¢–û–ì–û–í–û–ï –†–ï–ó–Æ–ú–ï

### –ì–ª–∞–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è DATABASE_URL –¥–ª—è PgBouncer**

### –ì–ª–∞–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
**–î–æ–±–∞–≤–∏—Ç—å `&statement_cache_size=0&connection_limit=15&pool_timeout=10` –≤ DATABASE_URL –Ω–∞ Vercel**

### –°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏:
**5 –º–∏–Ω—É—Ç** –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ + **2 –º–∏–Ω—É—Ç—ã** –Ω–∞ redeploy = **7 –º–∏–Ω—É—Ç —Ä–∞–±–æ—Ç—ã**

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ù–∏–∫–æ–≥–æ –Ω–µ –≤—ã–∫–∏–¥—ã–≤–∞–µ—Ç
- ‚úÖ Country Manager —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **2-3x –±—ã—Å—Ç—Ä–µ–µ** (–≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–π –ë–î)

### –ß—Ç–æ –¥–∞–ª—å—à–µ:
- –ï—Å–ª–∏ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ ‚Üí –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –µ—â–µ –±—ã—Å—Ç—Ä–µ–µ ‚Üí –Ω—É–∂–Ω–∞ –ø–ª–∞—Ç–Ω–∞—è –ë–î ($25/–º–µ—Å—è—Ü)

---

**–£—Å–ø–µ—Ö–æ–≤! –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ - –ø–∏—à–∏ —Å—é–¥–∞!** üöÄ

---

_–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 14 –æ–∫—Ç—è–±—Ä—è 2025_  
_–ê–≤—Ç–æ—Ä: AI Assistant_  
_–í–µ—Ä—Å–∏—è: 1.0_
