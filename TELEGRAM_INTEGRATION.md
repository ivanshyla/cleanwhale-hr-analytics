# üì± Telegram Integration

## –û–ø–∏—Å–∞–Ω–∏–µ

AI –æ—Ç—á–µ—Ç—ã –¥–ª—è –ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ Telegram —á–∞—Ç –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í —Ñ–∞–π–ª–µ `.env` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:

```env
TELEGRAM_BOT_TOKEN=7983513621:AAEhkYoAhpsgUD4A1GrZaqnZERKJBbyFs9Y
TELEGRAM_CHAT_ID=-834590892
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞**: –ö–æ–≥–¥–∞ Country Manager –∏–ª–∏ Admin –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç AI –æ—Ç—á–µ—Ç —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—É Analytics
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**: –û—Ç—á–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Telegram —á–∞—Ç "CleanWhale Board"
3. **–§–æ—Ä–º–∞—Ç**: –û—Ç—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ Markdown —Ñ–æ—Ä–º–∞—Ç–µ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## API Endpoint

`POST /api/export/ai-report`

### Response

```json
{
  "success": true,
  "report": "...",
  "weekIso": "2025-W41",
  "generatedAt": "2025-10-08T10:00:00.000Z",
  "sentToTelegram": true
}
```

## –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã

- **`/src/lib/telegram.ts`** - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram Bot API
- **`/src/app/api/export/ai-report/route.ts`** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
- **`.env`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ç–æ–∫–µ–Ω—ã –Ω–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ Git)

## –§—É–Ω–∫—Ü–∏–∏

### `sendTelegramMessage(text: string)`

–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —á–∞—Ç.

```typescript
import { sendTelegramMessage } from '@/lib/telegram';

await sendTelegramMessage('–ü—Ä–∏–≤–µ—Ç –∏–∑ CleanWhale!');
```

### `sendTelegramDocument(fileContent: string, fileName: string, caption?: string)`

–û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ –≤ Telegram.

```typescript
import { sendTelegramDocument } from '@/lib/telegram';

await sendTelegramDocument(
  reportContent,
  'report.md',
  '–û—Ç—á–µ—Ç –∑–∞ –Ω–µ–¥–µ–ª—é 41'
);
```

### `isTelegramConfigured()`

–ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Telegram.

```typescript
import { isTelegramConfigured } from '@/lib/telegram';

if (isTelegramConfigured()) {
  // Telegram –Ω–∞—Å—Ç—Ä–æ–µ–Ω
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –û—Ç—á–µ—Ç—ã —Å—Ä–∞–∑—É –ø–æ–ø–∞–¥–∞—é—Ç –≤ —á–∞—Ç –ø—Ä–∞–≤–ª–µ–Ω–∏—è  
‚úÖ **–£–¥–æ–±—Å—Ç–≤–æ**: –ù–µ –Ω—É–∂–Ω–æ —Å–∫–∞—á–∏–≤–∞—Ç—å –∏ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —Ñ–∞–π–ª—ã –≤—Ä—É—á–Ω—É—é  
‚úÖ **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: Telegram –ø—Ä–∏—Å—ã–ª–∞–µ—Ç push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è  
‚úÖ **–ò—Å—Ç–æ—Ä–∏—è**: –í—Å–µ –æ—Ç—á–µ—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —á–∞—Ç–µ  
‚úÖ **–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: –ú–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å —Å –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞  

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: 
- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –∏ Chat ID —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env` (–Ω–µ –≤ Git)
- –ë–æ—Ç –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ –æ–¥–Ω–æ–º—É —á–∞—Ç—É
- –û—Ç—á–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∫–æ–º–ø–∞–Ω–∏–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- ‚úÖ Markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –ö–∏—Ä–∏–ª–ª–∏—Ü–∞
- ‚úÖ –î–ª–∏–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (AI –æ—Ç—á–µ—Ç—ã ~2-3 KB)

**–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –≤ —á–∞—Ç "CleanWhale Board"** (Message ID: 914)

