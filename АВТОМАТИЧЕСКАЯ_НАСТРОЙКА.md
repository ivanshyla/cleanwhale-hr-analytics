# 🤖 Автоматическая настройка секретов через Vercel API

**Никаких ручных действий! Всё через API!**

---

## 🎯 Что это?

Автоматический скрипт который:
- ✅ Генерирует безопасные секреты
- ✅ Загружает их в Vercel через API
- ✅ Обновляет существующие или создает новые
- ✅ Запускает redeploy автоматически

**Всё за 2 минуты!**

---

## 📋 Подготовка (один раз)

### Шаг 1: Получи Vercel API Token

1. Зайди на https://vercel.com/account/tokens
2. Нажми **"Create Token"**
3. Название: `Setup Secrets` (или любое)
4. Scope: **Full Account** (или минимум Project Access)
5. Нажми **Create**
6. **Скопируй токен** (появится только один раз!)

### Шаг 2: Получи Project ID

1. Зайди на https://vercel.com/dashboard
2. Открой свой проект
3. **Settings** → **General**
4. Найди **Project ID** (например: `prj_abc123xyz`)
5. **Скопируй его**

### Шаг 3: Добавь в .env файл

Открой файл `.env` в корне проекта и добавь:

```bash
# Vercel API (для автоматической настройки)
VERCEL_TOKEN=vercel_xxx_твой_токен_здесь
VERCEL_PROJECT_ID=prj_твой_проект_id_здесь
```

**⚠️ ВАЖНО:** Файл `.env` уже в `.gitignore`, он не попадет в git!

---

## 🚀 Запуск (одна команда!)

```bash
node setup-secrets-vercel.mjs
```

**Вот и всё!** 🎉

Скрипт автоматически:
1. Генерирует 3 новых безопасных секрета
2. Загружает их в Vercel (обновит существующие или создаст новые)
3. Запускает redeploy проекта
4. Показывает результат

---

## 📊 Что увидишь:

```
🔐 АВТОМАТИЧЕСКАЯ НАСТРОЙКА СЕКРЕТОВ ЧЕРЕЗ VERCEL API
════════════════════════════════════════════════════

🎲 Генерирую новые безопасные секреты...
✅ Секреты сгенерированы

🔍 Проверяю существующие переменные...
  📝 Обновляю JWT_SECRET...
  ✅ JWT_SECRET обновлен
  📝 Обновляю REGISTRATION_SECRET...
  ✅ REGISTRATION_SECRET обновлен
  ➕ Создаю CRON_SECRET...
  ✅ CRON_SECRET создан

🚀 Запускаю redeploy...
✅ Redeploy запущен успешно!

✅ ВСЕ СЕКРЕТЫ УСПЕШНО ЗАГРУЖЕНЫ В VERCEL!
════════════════════════════════════════════════════
🎉 ГОТОВО! Секреты обновлены автоматически!
════════════════════════════════════════════════════
```

---

## ❓ FAQ

### Q: Безопасно ли хранить VERCEL_TOKEN в .env?

**A:** Да! Файл `.env` в `.gitignore` и никогда не попадает в репозиторий. Токен живет только локально на твоем компьютере.

### Q: Можно ли использовать этот скрипт многократно?

**A:** Да! Скрипт умный - он обновит существующие переменные, не создаст дубли.

### Q: Что если я потеряю сгенерированные секреты?

**A:** Просто запусти скрипт еще раз - он сгенерирует и загрузит новые.

### Q: Нужно ли удалять старые переменные вручную?

**A:** Нет! Скрипт автоматически обновляет существующие.

### Q: Работает ли это с GitHub/GitLab интеграцией?

**A:** Да! Скрипт работает независимо от источника кода.

### Q: Могу ли я увидеть что загрузилось в Vercel?

**A:** Да, зайди на Vercel → Settings → Environment Variables - увидишь обновленные значения (но не сами секреты - они зашифрованы).

---

## 🆘 Проблемы?

### Ошибка: "Не найден VERCEL_TOKEN"

Добавь в `.env`:
```bash
VERCEL_TOKEN=твой_токен_с_vercel.com/account/tokens
```

### Ошибка: "Не найден VERCEL_PROJECT_ID"

Добавь в `.env`:
```bash
VERCEL_PROJECT_ID=prj_твой_id_из_settings
```

### Ошибка: "API Error 403: Forbidden"

Твой токен не имеет прав. Создай новый токен с правами **Full Account** или **Project Access**.

### Ошибка: "API Error 404: Not Found"

Проверь что `VERCEL_PROJECT_ID` правильный (из Settings → General).

---

## 🔄 Сравнение методов

| Метод | Время | Автоматизация | Безопасность |
|-------|-------|---------------|--------------|
| **API скрипт** 🤖 | 2 мин | ✅ Полная | ✅ Отлично |
| Веб-интерфейс 🖱️ | 10-15 мин | ❌ Ручная | ✅ Отлично |

**Вывод:** API скрипт быстрее и удобнее! 🚀

---

## ✅ Готово!

После запуска скрипта:
- ✅ Секреты в Vercel обновлены
- ✅ Проект автоматически redeploy'ится
- ✅ Через 2-3 минуты всё работает с новыми секретами

**Никаких ручных действий! Всё автоматически! 🎉**

---

**Создано:** AI Assistant  
**Версия:** 2.0 (Automated)  
**Совместимость:** Vercel API v10

