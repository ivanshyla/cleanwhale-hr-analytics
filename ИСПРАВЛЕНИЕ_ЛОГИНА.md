# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ª–æ–≥–∏–Ω–æ–º

## üéØ –°—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

**PgBouncer –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç prepared statements**, –ø–æ—ç—Ç–æ–º—É –ª–æ–≥–∏–Ω –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π "user not found".

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–î–æ–±–∞–≤–∏—Ç—å `&statement_cache_size=0` –≤ DATABASE_URL.

---

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –û—Ç–∫—Ä–æ–π Vercel

1. –ó–∞–π–¥–∏ –Ω–∞ https://vercel.com
2. –û—Ç–∫—Ä–æ–π –ø—Ä–æ–µ–∫—Ç: **cleanwhale-hr-analytics**
3. –ü–µ—Ä–µ–π–¥–∏ –≤: **Settings** ‚Üí **Environment Variables**

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏ DATABASE_URL

1. –ù–∞–π–¥–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é **DATABASE_URL**
2. –ù–∞–∂–º–∏ —Ç—Ä–∏ —Ç–æ—á–∫–∏ —Å–ø—Ä–∞–≤–∞ ‚Üí **Edit**
3. –ó–∞–º–µ–Ω–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞:

```
postgresql://postgres.msluhxhvayzgxfioxgdi:zYjbam-hahheh-mawmo2@aws-1-eu-central-1.pooler.supabase.com:6543/postgres?pgbouncer=true&connect_timeout=30&statement_cache_size=0
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –í –∫–æ–Ω—Ü–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ `&statement_cache_size=0` ‚Äî —ç—Ç–æ –∫–ª—é—á–µ–≤–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ!

4. –í—ã–±–µ—Ä–∏ –≤—Å–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - ‚úÖ Production
   - ‚úÖ Preview  
   - ‚úÖ Development

5. –ù–∞–∂–º–∏ **Save**

### –®–∞–≥ 3: Redeploy

1. –í–µ—Ä–Ω–∏—Å—å –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø—Ä–æ–µ–∫—Ç–∞
2. –ù–∞–∂–º–∏ —Ç—Ä–∏ —Ç–æ—á–∫–∏ (‚ãØ) ‚Üí **Redeploy**
3. –ù–∞–∂–º–∏ **Deploy**

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ–¥–æ–∂–¥–∏ 1-2 –º–∏–Ω—É—Ç—ã –∏ –ø–æ–ø—Ä–æ–±—É–π –≤–æ–π—Ç–∏:
- Login: `country_manager`
- Password: `country123`

---

## üîç –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞

### –ß—Ç–æ –±—ã–ª–æ –Ω–µ —Ç–∞–∫?

1. **Supabase Pooler (PgBouncer)** —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ "transaction pooling"
2. –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ **prepared statements –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è**
3. Prisma –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç prepared statements –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
4. –ò–∑-–∑–∞ —ç—Ç–æ–≥–æ –∑–∞–ø—Ä–æ—Å—ã –ø–∞–¥–∞–ª–∏ —Å –æ—à–∏–±–∫–æ–π

### –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏–ª–∏?

–ü–∞—Ä–∞–º–µ—Ç—Ä `statement_cache_size=0` –≥–æ–≤–æ—Ä–∏—Ç Prisma:
- **–ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å prepared statements**
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ–±—ã—á–Ω—ã–µ SQL-–∑–∞–ø—Ä–æ—Å—ã
- –≠—Ç–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å PgBouncer

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (< 5%)
- –ó–∞—Ç–æ **100% —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è serverless-–æ–∫—Ä—É–∂–µ–Ω–∏–π (Vercel, AWS Lambda)

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [Prisma + PgBouncer](https://www.prisma.io/docs/guides/performance-and-optimization/connection-management/configure-pg-bouncer)
- [Supabase Connection Pooling](https://supabase.com/docs/guides/database/connecting-to-postgres#connection-pooler)

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ –õ–æ–≥–∏–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "user not found"
- ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î –Ω–µ –∑–∞–≤–∏—Å–∞—é—Ç
- ‚úÖ –í—Å–µ 14 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–æ–≥—É—Ç –≤–æ–π—Ç–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-10  
**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é

